(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"2bLh":function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return g}));var r,o=n("ODXe"),a=n("rePB"),u=n("q1tI"),i=n.n(u),c=n("Evpv"),s=n("o0o1"),l=n.n(s),d=n("HaE+"),v=n("raqg"),b=n("QFT7"),f=n("Z6YE"),O=n("mfX+"),m={},k=function(e){var t=Object(f.c)().account,n=Object(b.a)(O.d),r=Object(v.a)({}),a=Object(o.a)(r,2),i=a[0],s=a[1];Object(u.useEffect)((function(){s((function(e){return m}))}),[t,s]);var k=Object(u.useCallback)(function(){var r=Object(d.a)(l.a.mark((function r(o){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:if(o){r.next=4;break}return r.abrupt("return");case 4:if(!Object(c.u)(o)){r.next=6;break}return r.abrupt("return",s((function(e){e[o]={tokenAllowance:c.i.toString(),error:null,loading:void 0}})));case 6:return r.prev=6,s((function(e){var t,n;e[o]={tokenAllowance:null!==(t=null===(n=e[o])||void 0===n?void 0:n.tokenAllowance)&&void 0!==t?t:null,error:null,loading:!0}})),r.next=10,null===n||void 0===n?void 0:n.alchemy.getTokenAllowance({contract:o,owner:t,spender:e});case 10:a=r.sent,s((function(e){e[o]={tokenAllowance:a,error:null,loading:void 0}})),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(6),console.error("TokenAllowanceProvider:refreshTokenAllowance",r.t0),s((function(e){e[o]={tokenAllowance:null,error:r.t0,loading:void 0}}));case 18:case"end":return r.stop()}}),r,null,[[6,14]])})));return function(e){return r.apply(this,arguments)}}(),[t,e,s,null===n||void 0===n?void 0:n.alchemy]);return[i,Object(u.useMemo)((function(){return{refreshTokenAllowance:k}}),[k])]},j=i.a.createElement,p={tokenAllowance:c.i.toString(),error:null,loading:void 0},h=(r={},Object(a.a)(r,c.d.toLowerCase(),{}),Object(a.a)(r,c.f.toLowerCase(),{}),Object(a.a)(r,c.k.toLowerCase(),{}),r),w=i.a.createContext(h),_=i.a.createContext(void 0),C=function(e){var t=e.children,n=k(c.d),r=Object(o.a)(n,2),i=r[0],s=r[1],l=k(c.f),d=Object(o.a)(l,2),v=d[0],b=d[1],f=Object(u.useMemo)((function(){return{refreshTokenAllowance:function(e){s.refreshTokenAllowance(e),b.refreshTokenAllowance(e)}}}),[s,b]),O=Object(u.useMemo)((function(){var e;return e={},Object(a.a)(e,c.d.toLowerCase(),i),Object(a.a)(e,c.f.toLowerCase(),v),e}),[i,v]);return j(_.Provider,{value:f},j(w.Provider,{value:O},t))},g=function(e,t){var n,r=i.a.useContext(w),o=i.a.useContext(_),a=null===e||void 0===e?void 0:e.toLowerCase();return Object(u.useEffect)((function(){a&&t&&(null===o||void 0===o||o.refreshTokenAllowance(t))}),[a,o,t]),a&&t?a===c.k.toLowerCase()?[p,o]:[null===(n=r[a])||void 0===n?void 0:n[t],o]:[void 0,o]}},"9nhX":function(e,t,n){var r=n("g4R6"),o=n("tLB3");e.exports=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=o(n))===n?n:0),void 0!==t&&(t=(t=o(t))===t?t:0),r(o(e),t,n)}},g4R6:function(e,t){e.exports=function(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},j8B8:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return p}));var r=n("o0o1"),o=n.n(r),a=n("HaE+"),u=n("q1tI"),i=n.n(u),c=n("Z6YE"),s=n("VtrM"),l=n("fCym"),d=n("m6a3"),v=n("Lx10"),b=i.a.createElement,f={method:"metatx"},O={setMethod:function(e){}},m=i.a.createContext(f),k=i.a.createContext(O),j=function(e){var t=e.children,n=Object(u.useState)("metatx"),r=n[0],i=n[1],f=Object(u.useState)(void 0),O=f[0],j=f[1],p=Object(l.a)().reportError,h=Object(c.c)(),w=h.library,_=h.account,C=Object(s.a)([null!==_&&void 0!==_?_:null],v.m,{refreshInterval:15e3}),g=C.data,x=C.error;Object(u.useEffect)((function(){(function(){var e=Object(a.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.isArgentWallet)(w,_);case 2:!0!==(t=e.sent)&&!1!==t||j(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().catch((function(e){console.error(e),p(e)}))}),[w,_,p]),Object(u.useEffect)((function(){!1===(null===g||void 0===g?void 0:g.isLive)||x||!0===O?i("rfqt"):!0===(null===g||void 0===g?void 0:g.isLive)&&i("metatx")}),[null===g||void 0===g?void 0:g.isLive,x,O]);var A=Object(u.useMemo)((function(){return{method:r}}),[r]),E=Object(u.useMemo)((function(){return{setMethod:i}}),[i]);return b(k.Provider,{value:E},b(m.Provider,{value:A},t))},p=function(){return[i.a.useContext(m),i.a.useContext(k)]}},js8z:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return M})),n.d(t,"a",(function(){return X})),n.d(t,"e",(function(){return B})),n.d(t,"d",(function(){return D}));var r,o=n("ODXe"),a=n("o0o1"),u=n.n(a),i=n("HaE+"),c=n("Uz7z"),s=n("tLXD"),l=n("q1tI"),d=n.n(l),v=n("8R+5"),b=n("Z6YE"),f=n("haXk"),O=n.n(f),m=n("jUKV"),k=n("9nhX"),j=n.n(k),p=n("nOHt"),h=n("raqg"),w=n("SEJQ"),_=n("SJ2M"),C=n("k5ej"),g=n("2bLh"),x=n("Evpv"),A=n("mfX+"),E=n("9Z3m"),y=n("Ykyk"),S=n("7nSh"),T=n("iaY6"),P=n("kp/Y"),L=d.a.createElement,I=["user_approve_token_disclaimer_base_token","user_approve_token_disclaimer_quote_token","asset_page_pick_quote_token","market_page_pick_amounts","connect_wallet","approve_app_from_wallet","not_enough_eth_for_allowance_fees","approve_sell_token_allowance","not_enough_eth_for_swap_fees","confirm_and_buy"];!function(e){e.Fast="Fast",e.Trader="Trader",e.Custom="Custom"}(r||(r={}));var M,R=d.a.createContext({}),q=d.a.createContext({checkoutMode:"market",limitOrderExpirationInMinutes:"60",availableExchanges:T.g,excludedExchanges:[],marketOrderCustomSlippageAmount:void 0,marketOrderCustomGasPriceInGwei:void 0,marketOrderCustomGasPriceCategory:void 0,userPrefersInvertedRate:!1}),G=d.a.createContext({setCheckoutMode:function(){return new Error("Checkout provider not set")},setLimitOrderRate:function(){return new Error("Checkout provider not set")},setLimitOrderExpiration:function(){return new Error("Checkout provider not set")},setMarketOrderCustomSlippageAmount:function(){return new Error("Checkout provider not set")},setMarketOrderCustomSourceExclusionList:function(){return new Error("Checkout provider not set")},setMarketOrderCustomGasPriceInGwei:function(){return new Error("Checkout provider not set")},setMarketOrderCustomGasPriceCategory:function(){return new Error("Checkout provider not set")},setUserPrefersInvertedRate:function(){return new Error("Checkout provider not set")}}),X=function(e){var t,n,r=e.children,a=Object(b.c)(),d=a.account,f=a.active,k=a.connector,j=a.library,M=a.error,X=Object(l.useState)(!1),B=X[0],D=X[1];Object(l.useEffect)((function(){var e,t,n,r,o=!1,a=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,r,a,i,c,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d||!k){e.next=29;break}if(!(k instanceof m.a||k.isAuthorized)){e.next=25;break}if(!(null===(t=window.ethereum)||void 0===t?void 0:t.isMetaMask)||!(null===(n=window.ethereum)||void 0===n||null===(r=n._metamask)||void 0===r?void 0:r.isApproved)){e.next=8;break}return e.next=5,null===(a=window.ethereum)||void 0===a||null===(i=a._metamask)||void 0===i?void 0:i.isApproved();case 5:return c=e.sent,D(c),e.abrupt("return");case 8:return e.t0=E.b,e.next=11,k.getProvider();case 11:if(e.t1=e.sent,!(s=(0,e.t0)(e.t1))||!Object(E.c)(s)){e.next=16;break}return D(!0),e.abrupt("return");case 16:return e.next=18,null===k||void 0===k?void 0:k.isAuthorized();case 18:if(l=e.sent,!o){e.next=21;break}return e.abrupt("return");case 21:return D(l),e.abrupt("return");case 25:return D(!0),e.abrupt("return");case 27:e.next=31;break;case 29:return D(!1),e.abrupt("return");case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(a(),null===(e=window.ethereum)||void 0===e?void 0:e.on)&&(null===(t=window.ethereum)||void 0===t||t.on("chainChanged",a),null===(n=window.ethereum)||void 0===n||n.on("accountsChanged",a),null===(r=window.ethereum)||void 0===r||r.on("networkChanged",a));return function(){var e,t,n,r;(o=!0,null===(e=window.ethereum)||void 0===e?void 0:e.removeListener)&&(null===(t=window.ethereum)||void 0===t||t.removeListener("chainChanged",a),null===(n=window.ethereum)||void 0===n||n.removeListener("accountsChanged",a),null===(r=window.ethereum)||void 0===r||r.removeListener("networkChanged",a))}}),[d,k]),Object(w.i)(),Object(_.c)();var H=Object(l.useRef)(Object(v.a)()),F=Object(l.useState)(T.g)[0],U=Object(h.a)([]),Y=Object(o.a)(U,2),z=Y[0],Q=Y[1],J=Object(l.useState)(void 0),V=J[0],W=J[1],Z=Object(l.useState)(void 0),N=Z[0],K=Z[1],$=Object(l.useState)(void 0),ee=$[0],te=$[1],ne=Object(l.useCallback)((function(e){F.includes(e)?z.findIndex((function(t){return t===e}))>=0?console.warn("Exclusion ".concat(e," already exists, skipping")):Q((function(t){t.push(e)})):console.warn("Tried to exclude an exchange that does not exist",e)}),[Q,F,z]),re=Object(l.useCallback)((function(e){Q((function(t){var n=z.findIndex((function(t){return t===e}));n&&delete t[n]}))}),[Q,z]),oe=Object(l.useState)(),ae=oe[0],ue=oe[1],ie=Object(l.useState)(),ce=ie[0],se=ie[1],le=Object(l.useState)(!1),de=le[0],ve=le[1],be=Object(l.useState)("market"),fe=be[0],Oe=be[1],me=Object(l.useState)("60"),ke=me[0],je=me[1],pe=Object(l.useCallback)((function(e){ue(e)}),[]),he=Object(l.useCallback)((function(e){se(e)}),[]),we=Object(w.e)(ae),_e=Object(w.e)(ce);Object(l.useEffect)((function(){var e,t;Object(x.u)(null===we||void 0===we?void 0:we.tokenAddress)||Object(x.u)(null===_e||void 0===_e?void 0:_e.tokenAddress)?Oe("market"):((null===we||void 0===we||null===(e=we.metadata)||void 0===e?void 0:e.defaultToLimitOrder)||(null===_e||void 0===_e||null===(t=_e.metadata)||void 0===t?void 0:t.defaultToLimitOrder))&&Oe("limit")}),[null===we||void 0===we||null===(t=we.metadata)||void 0===t?void 0:t.defaultToLimitOrder,null===we||void 0===we?void 0:we.tokenAddress,null===_e||void 0===_e||null===(n=_e.metadata)||void 0===n?void 0:n.defaultToLimitOrder,null===_e||void 0===_e?void 0:_e.tokenAddress]);var Ce=Object(l.useState)("buying"),ge=Ce[0],xe=Ce[1],Ae=Object(l.useCallback)((function(){xe((function(e){return"buying"===e?"selling":"buying"}))}),[]),Ee=Object(l.useCallback)((function(e){"buying"===ge?pe(e):"selling"===ge&&he(e)}),[ge,pe,he]),ye=Object(l.useCallback)((function(e){"selling"===ge?pe(e):"buying"===ge&&he(e)}),[ge,pe,he]),Se="buying"===ge?ae:ce,Te="buying"===ge?ce:ae,Pe=Object(w.e)(Te),Le=Object(w.e)(Se),Ie=Object(l.useState)(void 0),Me=Ie[0],Re=Ie[1],qe=Object(l.useState)(void 0),Ge=qe[0],Xe=qe[1],Be=Object(l.useState)(void 0),De=Be[0],He=Be[1],Fe=Object(l.useState)(void 0),Ue=Fe[0],Ye=Fe[1],ze="buying"===ge?Me:Ge,Qe="buying"===ge?Ge:Me,Je=Object(C.a)({buyToken:Le,sellToken:Pe,buyAmount:Object(y.c)(ze),sellAmount:Object(y.c)(Qe),userAddress:d}),Ve=Object(w.e)("ETH"),We=Object(_.b)(null===Ve||void 0===Ve?void 0:Ve.tokenAddress);Object(l.useEffect)((function(){He(void 0)}),[ae,ce,He]),Object(l.useEffect)((function(){H.current.emit("pair_change",ae,ce)}),[ae,ce]);var Ze=Object(l.useState)(),Ne=Ze[0],Ke=Ze[1],$e=Object(l.useRef)(void 0),et=x.d;(null===Ne||void 0===Ne?void 0:Ne.allowanceTarget)&&(et=Ne.sellTokenAddress.toLowerCase()===x.e?x.k:x.g);var tt=Object(g.b)(et,null===Pe||void 0===Pe?void 0:Pe.tokenAddress),nt=Object(o.a)(tt,1)[0],rt=Object(P.b)(ae),ot=Object(P.b)(ce),at=Object(l.useCallback)((function(){if(ae&&rt)return"user_approve_token_disclaimer_base_token";if(ce&&ot)return"user_approve_token_disclaimer_quote_token";if(ae&&!ce)return"asset_page_pick_quote_token";if(ae&&ce){if(!Ne&&"market"===fe||!Ue&&"limit"===fe)return"market_page_pick_amounts";if(!d||!f||M||!B||!j)return"connect_wallet";var e=new O.a(x.i);if("market"===fe?e=new O.a(Ne.sellAmount):"limit"===fe&&(e=new O.a(Ue.makerAssetAmount.toString())),!(!!Object(x.u)(Se)&&!!Object(x.v)(Te))&&(!nt||!nt.tokenAllowance||new O.a(nt.tokenAllowance).lt(new O.a(e))||nt.error)){var t,n=Object(y.c)(null===Ne||void 0===Ne?void 0:Ne.gasPrice),r=new O.a(Object(S.f)(Pe)),o=y.a,a=null!==(t=Object(S.a)({gas:r,gasPrice:n,protocolFee:o}))&&void 0!==t?t:y.a;return We&&a.greaterThan(We)?"not_enough_eth_for_allowance_fees":"approve_sell_token_allowance"}if("market"===fe&&!Je){var u,i=Object(y.c)(null===Ne||void 0===Ne?void 0:Ne.estimatedGas),c=Object(y.c)(null===Ne||void 0===Ne?void 0:Ne.gasPrice),s=Object(y.c)(null===Ne||void 0===Ne?void 0:Ne.minimumProtocolFee),l=null!==(u=Object(S.a)({gas:i,gasPrice:c,protocolFee:s}))&&void 0!==u?u:y.a;if(We&&l.mul(A.m).greaterThan(We))return"not_enough_eth_for_swap_fees"}return"confirm_and_buy"}}),[ae,rt,ce,ot,Ne,fe,Ue,d,f,M,B,j,Se,Te,Je,nt,Pe,We])(),ut=Object(c.a)(at),it=(ut?I.indexOf(ut):-1)>(at?I.indexOf(at):-1);$e.current=it;var ct=Object(s.a)(ae),st=Object(l.useRef)();st.current=ct;var lt=Object(l.useCallback)((function(){}),[]),dt=Object(l.useCallback)((function(){}),[]),vt=Object(l.useCallback)((function(e){Ye(e)}),[]),bt=Object(l.useCallback)((function(e){Ke(e)}),[]),ft=Object(l.useCallback)((function(){Ke(void 0),Ye(void 0)}),[]),Ot=Object(l.useCallback)((function(){ft(),Re(void 0),Xe(void 0),He(void 0)}),[ft]),mt=Object(p.useRouter)();return Object(l.useEffect)((function(){mt.pathname.includes("/markets")||Ot()}),[Ot,mt.pathname]),L(R.Provider,{value:{emitter:H.current}},L(G.Provider,{value:{setQuoteAssetAddress:he,setBaseAssetAddress:pe,setBuyingOrSellingBase:xe,setCheckoutMode:Oe,setLimitOrderExpiration:je,setBuyAssetAddress:Ee,setSellAssetAddress:ye,setBaseInputAmount:Re,setQuoteInputAmount:Xe,setLimitOrderRate:He,switchBuyAndSell:Ae,goToNextStep:lt,goToPreviousStep:dt,saveLimitOrderSnapshotAndStartCheckout:vt,saveMarketOrderSnapshotAndStartCheckout:bt,resetSnapshotQuotes:ft,resetCheckout:Ot,addExchangeToExcludeList:ne,removeExchangeFromExcludeList:re,setMarketOrderCustomGasPriceInGwei:K,setMarketOrderCustomSlippageAmount:W,setMarketOrderCustomGasPriceCategory:te,setMarketOrderCustomSourceExclusionList:Q,setUserPrefersInvertedRate:ve}},L(q.Provider,{value:{step:at,previousStep:ut,isBackRef:$e,checkoutMode:fe,previousBaseSymbolRef:st,baseAssetAddress:ae,quoteAssetAddress:ce,buyTokenAddress:Se,sellTokenAddress:Te,buyingOrSellingBaseAsset:ge,baseInputAmount:Me,quoteInputAmount:Ge,buyInputAmount:ze,sellInputAmount:Qe,limitOrderRate:De,limitOrderExpirationInMinutes:ke,limitOrderSnapshot:Ue,quoteSnapshot:Ne,availableExchanges:F,excludedExchanges:z,marketOrderCustomGasPriceCategory:ee,marketOrderCustomGasPriceInGwei:N,marketOrderCustomSlippageAmount:V,userPrefersInvertedRate:de}},r)))},B=function(){return[d.a.useContext(q),d.a.useContext(G),d.a.useContext(R)]};!function(e){e.idle="idle",e.waiting_for_user_approval="waiting_for_user_approval",e.waiting_for_tx_to_be_mined="waiting_for_tx_to_be_mined",e.tx_mined_successfully="tx_mined_successfully",e.tx_failed="tx_failed",e.tx_cancelled="tx_cancelled"}(M||(M={}));var D=function(e,t,n){if("tx_mined_successfully"===e)return 100;if(void 0===t||void 0===n)return 0;var r=(t||0)/1e3;if(0===r)return 0;var o=100*((r-n)/r);return j()(o,0,96)}},k5ej:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("ODXe"),o=n("haXk"),a=n.n(o),u=n("Py6W"),i=n("j8B8"),c=n("r9+d"),s=n("XsEy"),l=n("js8z"),d=n("RV3y"),v=["0x524802b34cb508be2062d02a6e1cf577c2e66fba"].map((function(e){return e.toLowerCase()})),b=function(e){var t=e.buyToken,n=e.sellToken,o=e.buyAmount,b=e.sellAmount,f=e.userAddress,O=Object(u.b)(null===n||void 0===n?void 0:n.symbol),m=Object(u.b)(null===t||void 0===t?void 0:t.symbol),k=Object(s.d)(),j=Object(l.e)(),p=Object(r.a)(j,1)[0],h=Object(i.b)(),w=Object(r.a)(h,1)[0].method,_=Object(c.b)();if(t&&n&&(b||o)){var C,g=!!k.find((function(e){return e.tokenAddress===n.tokenAddress})),x=!!k.find((function(e){return e.tokenAddress===t.tokenAddress}));if(!g||!x)return!1;if(p.marketOrderCustomGasPriceInGwei)return!1;if(p.marketOrderCustomGasPriceCategory)return!1;if(f&&v.includes(null===f||void 0===f?void 0:f.toLowerCase()))return!1;if(!!b){var A=null===O||void 0===O?void 0:O.PRICE;C=new a.a(null!==A&&void 0!==A?A:0).mul(null!==b&&void 0!==b?b:0)}else{var E=null===m||void 0===m?void 0:m.PRICE;C=new a.a(null!==E&&void 0!==E?E:0).mul(null!==o&&void 0!==o?o:0)}var y="ETH"===t.symbol&&"WETH"===n.symbol||"WETH"===t.symbol&&"ETH"===n.symbol,S="metatx"===w&&"ETH"!==n.symbol&&!y;return(!Object(d.b)("USDC","DAI",t,n)||!C.lessThan(1e5))&&((!Object(d.b)("USDC","USDT",t,n)||!C.lessThan(1e5))&&(C.lessThan(2e3)&&!_&&(S=!1),S))}}},"kp/Y":function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return f}));var r=n("ODXe"),o=n("q1tI"),a=n.n(o),u=n("raqg"),i=n("XsEy"),c=a.a.createElement,s=a.a.createContext({}),l=a.a.createContext({acceptDisclaimerForTokenAddress:function(){return new Error(d)}}),d="Token Disclaimer Data provider not set",v=function(e){var t=e.children,n=Object(u.a)({}),a=Object(r.a)(n,2),i=a[0],d=a[1],v=Object(o.useCallback)((function(e){d((function(t){t[e]=!0}))}),[d]),b=Object(o.useMemo)((function(){return{acceptDisclaimerForTokenAddress:v}}),[v]);return c(s.Provider,{value:i},c(l.Provider,{value:b},t))},b=function(){return[a.a.useContext(s),a.a.useContext(l)]},f=function(e){var t=Object(i.b)(),n=b(),o=Object(r.a)(n,1)[0];if(e)return!t[e]&&!o[e]}},"r9+d":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n("q1tI"),o=n.n(r),a=n("nOHt"),u=n("Xccw"),i=o.a.createElement,c=o.a.createContext(void 0),s=function(e){var t=e.children,n=Object(r.useState)(void 0),o=n[0],s=n[1],l=Object(a.useRouter)(),d=Object(u.a)("isInternal"),v=d.value,b=d.hasRead,f=d.setValue,O=l.query.isInternal;return Object(r.useEffect)((function(){if(b){var e=!1;(v||O)&&(e=!0)!==v&&f(e),s(e)}}),[b,v,O,f]),i(c.Provider,{value:o},t)},l=function(){return o.a.useContext(c)}}}]);